package me.glowmonster.naisnow.servlet;

import me.glowmonster.naisnow.AutoSave;

import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;

public class TestUseServlet extends HttpServlet {
    final String BASE_SAVE_DIRECTORY = "D:\\Acg\\snow-n-rosi";
    final String IMAGE_CSS_QUERY = ".imageclick-imgbox";
    final String BROWSER = "Mozilla";
    final String ATTRIBUTE_NAME = "href";
    final String PAGE_TOTAL_CSS_QUERY = "a.page-numbers:nth-last-of-type(2)";
    final String PAGE_TITLE_CSS_QUERY = ".item_title > h1";
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        resp.setHeader("Access-Control-Allow-Origin", "*");
        /* 允许跨域的请求方法GET, POST, HEAD 等 */
        resp.setHeader("Access-Control-Allow-Methods", "*");
        /* 重新预检验跨域的缓存时间 (s) */
        resp.setHeader("Access-Control-Max-Age", "3600");
        /* 允许跨域的请求头 */
        resp.setHeader("Access-Control-Allow-Headers", "*");
        req.setCharacterEncoding("utf-8");
        resp.setCharacterEncoding("utf-8");
        // String urlString = req.getParameter("urls");
        String urlString = "https://www.naixue.org/27191.html,https://www.naixue.org/27189.html,https://www.naixue.org/27187.html,https://www.naixue.org/27185.html,https://www.naixue.org/27183.html,https://www.naixue.org/27181.html,https://www.naixue.org/27179.html,https://www.naixue.org/27177.html,https://www.naixue.org/27175.html,https://www.naixue.org/27173.html,https://www.naixue.org/27171.html,https://www.naixue.org/27169.html,https://www.naixue.org/27167.html,https://www.naixue.org/27165.html,https://www.naixue.org/27163.html,https://www.naixue.org/27161.html,https://www.naixue.org/27159.html,https://www.naixue.org/27157.html,https://www.naixue.org/27155.html,https://www.naixue.org/27153.html,https://www.naixue.org/27151.html,https://www.naixue.org/27149.html,https://www.naixue.org/27147.html,https://www.naixue.org/27145.html,https://www.naixue.org/27143.html,https://www.naixue.org/27141.html,https://www.naixue.org/27139.html,https://www.naixue.org/27137.html,https://www.naixue.org/27135.html,https://www.naixue.org/27133.html,https://www.naixue.org/27131.html,https://www.naixue.org/27129.html,https://www.naixue.org/27127.html,https://www.naixue.org/27125.html,https://www.naixue.org/27123.html,https://www.naixue.org/27121.html,https://www.naixue.org/27119.html,https://www.naixue.org/27115.html,https://www.naixue.org/27117.html,https://www.naixue.org/27113.html,https://www.naixue.org/27110.html,https://www.naixue.org/27108.html,https://www.naixue.org/27106.html,https://www.naixue.org/27104.html,https://www.naixue.org/27102.html,https://www.naixue.org/27100.html,https://www.naixue.org/27098.html,https://www.naixue.org/27096.html,https://www.naixue.org/27094.html,https://www.naixue.org/27092.html,https://www.naixue.org/27090.html,https://www.naixue.org/27088.html,https://www.naixue.org/27086.html,https://www.naixue.org/27084.html,https://www.naixue.org/27082.html,https://www.naixue.org/27080.html,https://www.naixue.org/27078.html,https://www.naixue.org/27076.html,https://www.naixue.org/27074.html,https://www.naixue.org/27072.html,https://www.naixue.org/27070.html,https://www.naixue.org/27068.html,https://www.naixue.org/27066.html,https://www.naixue.org/27064.html,https://www.naixue.org/27062.html,https://www.naixue.org/27060.html,https://www.naixue.org/27058.html,https://www.naixue.org/27056.html,https://www.naixue.org/27054.html,https://www.naixue.org/27052.html,https://www.naixue.org/27050.html,https://www.naixue.org/27048.html,https://www.naixue.org/27046.html,https://www.naixue.org/27044.html,https://www.naixue.org/27042.html,https://www.naixue.org/27040.html,https://www.naixue.org/27038.html,https://www.naixue.org/27036.html,https://www.naixue.org/27034.html,https://www.naixue.org/27032.html,https://www.naixue.org/27030.html,https://www.naixue.org/27028.html,https://www.naixue.org/27026.html,https://www.naixue.org/27024.html,https://www.naixue.org/27022.html,https://www.naixue.org/27020.html,https://www.naixue.org/27018.html,https://www.naixue.org/27016.html,https://www.naixue.org/27014.html,https://www.naixue.org/27012.html,https://www.naixue.org/27010.html,https://www.naixue.org/27008.html,https://www.naixue.org/27006.html,https://www.naixue.org/27004.html,https://www.naixue.org/27002.html,https://www.naixue.org/27000.html,https://www.naixue.org/26998.html,https://www.naixue.org/26996.html,https://www.naixue.org/26994.html,https://www.naixue.org/26992.html,https://www.naixue.org/26990.html,https://www.naixue.org/26987.html,https://www.naixue.org/26985.html,https://www.naixue.org/26983.html,https://www.naixue.org/26981.html,https://www.naixue.org/26979.html,https://www.naixue.org/26977.html,https://www.naixue.org/26975.html,https://www.naixue.org/26973.html,https://www.naixue.org/26971.html,https://www.naixue.org/26969.html,https://www.naixue.org/26967.html,https://www.naixue.org/26965.html,https://www.naixue.org/26962.html,https://www.naixue.org/26963.html,https://www.naixue.org/26955.html,https://www.naixue.org/26953.html,https://www.naixue.org/26951.html,https://www.naixue.org/26949.html,https://www.naixue.org/26947.html,https://www.naixue.org/26945.html,https://www.naixue.org/26943.html,https://www.naixue.org/26941.html,https://www.naixue.org/26939.html,https://www.naixue.org/26937.html,https://www.naixue.org/26935.html,https://www.naixue.org/26933.html,https://www.naixue.org/26931.html,https://www.naixue.org/26929.html,https://www.naixue.org/26927.html,https://www.naixue.org/26925.html,https://www.naixue.org/26923.html,https://www.naixue.org/26921.html,https://www.naixue.org/26919.html,https://www.naixue.org/26917.html,https://www.naixue.org/26915.html,https://www.naixue.org/26913.html,https://www.naixue.org/26911.html,https://www.naixue.org/26909.html,https://www.naixue.org/26907.html,https://www.naixue.org/26905.html,https://www.naixue.org/26903.html,https://www.naixue.org/26901.html,https://www.naixue.org/26899.html,https://www.naixue.org/26897.html,https://www.naixue.org/26895.html,https://www.naixue.org/26893.html,https://www.naixue.org/26891.html,https://www.naixue.org/26889.html,https://www.naixue.org/26887.html,https://www.naixue.org/26885.html,https://www.naixue.org/26883.html,https://www.naixue.org/26881.html,https://www.naixue.org/26879.html,https://www.naixue.org/26877.html,https://www.naixue.org/26873.html,https://www.naixue.org/26871.html,https://www.naixue.org/26869.html,https://www.naixue.org/26867.html,https://www.naixue.org/26865.html,https://www.naixue.org/26862.html,https://www.naixue.org/26860.html,https://www.naixue.org/26858.html,https://www.naixue.org/26856.html,https://www.naixue.org/26854.html,https://www.naixue.org/26852.html,https://www.naixue.org/26850.html,https://www.naixue.org/26848.html,https://www.naixue.org/26846.html,https://www.naixue.org/26844.html,https://www.naixue.org/26842.html,https://www.naixue.org/26840.html,https://www.naixue.org/26838.html,https://www.naixue.org/26836.html,https://www.naixue.org/26834.html,https://www.naixue.org/26832.html,https://www.naixue.org/26830.html,https://www.naixue.org/26828.html,https://www.naixue.org/26826.html,https://www.naixue.org/26824.html,https://www.naixue.org/26822.html,https://www.naixue.org/26820.html,https://www.naixue.org/26818.html,https://www.naixue.org/26816.html,https://www.naixue.org/26814.html,https://www.naixue.org/26812.html,https://www.naixue.org/26810.html,https://www.naixue.org/26808.html,https://www.naixue.org/26806.html,https://www.naixue.org/26804.html,https://www.naixue.org/26802.html,https://www.naixue.org/26800.html,https://www.naixue.org/26798.html,https://www.naixue.org/26796.html,https://www.naixue.org/26794.html,https://www.naixue.org/26792.html,https://www.naixue.org/26790.html,https://www.naixue.org/26788.html,https://www.naixue.org/26786.html,https://www.naixue.org/26784.html,https://www.naixue.org/26782.html,https://www.naixue.org/26780.html,https://www.naixue.org/26777.html,https://www.naixue.org/26775.html,https://www.naixue.org/26773.html,https://www.naixue.org/26771.html,https://www.naixue.org/26769.html,https://www.naixue.org/26767.html,https://www.naixue.org/26765.html,https://www.naixue.org/26763.html,https://www.naixue.org/26761.html,https://www.naixue.org/26759.html,https://www.naixue.org/26757.html,https://www.naixue.org/26755.html,https://www.naixue.org/26753.html,https://www.naixue.org/26751.html,https://www.naixue.org/26749.html,https://www.naixue.org/26747.html,https://www.naixue.org/26745.html,https://www.naixue.org/26743.html,https://www.naixue.org/26741.html,https://www.naixue.org/26739.html,https://www.naixue.org/26737.html,https://www.naixue.org/26735.html,https://www.naixue.org/26733.html,https://www.naixue.org/26731.html,https://www.naixue.org/26729.html,https://www.naixue.org/26727.html,https://www.naixue.org/26725.html,https://www.naixue.org/26723.html,https://www.naixue.org/26721.html,https://www.naixue.org/26719.html,https://www.naixue.org/26717.html,https://www.naixue.org/26715.html,https://www.naixue.org/26713.html,https://www.naixue.org/26711.html,https://www.naixue.org/26709.html,https://www.naixue.org/26707.html,https://www.naixue.org/26705.html,https://www.naixue.org/26703.html,https://www.naixue.org/26701.html,https://www.naixue.org/26699.html,https://www.naixue.org/26697.html,https://www.naixue.org/26695.html,https://www.naixue.org/26693.html,https://www.naixue.org/26691.html,https://www.naixue.org/26689.html,https://www.naixue.org/26687.html,https://www.naixue.org/26685.html,https://www.naixue.org/26683.html,https://www.naixue.org/26681.html,https://www.naixue.org/26679.html,https://www.naixue.org/26677.html,https://www.naixue.org/26675.html,https://www.naixue.org/26673.html,https://www.naixue.org/26671.html,https://www.naixue.org/26669.html,https://www.naixue.org/26667.html,https://www.naixue.org/26665.html,https://www.naixue.org/26663.html,https://www.naixue.org/26661.html,https://www.naixue.org/26659.html,https://www.naixue.org/26657.html,https://www.naixue.org/26655.html,https://www.naixue.org/26653.html,https://www.naixue.org/26651.html,https://www.naixue.org/26649.html,https://www.naixue.org/26647.html,https://www.naixue.org/26645.html,https://www.naixue.org/26643.html,https://www.naixue.org/26641.html,https://www.naixue.org/26639.html,https://www.naixue.org/26637.html,https://www.naixue.org/26635.html,https://www.naixue.org/26633.html,https://www.naixue.org/26631.html,https://www.naixue.org/26629.html,https://www.naixue.org/26627.html,https://www.naixue.org/26625.html,https://www.naixue.org/26623.html,https://www.naixue.org/26621.html,https://www.naixue.org/26619.html,https://www.naixue.org/26617.html,https://www.naixue.org/26615.html,https://www.naixue.org/26613.html,https://www.naixue.org/26611.html,https://www.naixue.org/26609.html,https://www.naixue.org/26607.html,https://www.naixue.org/26605.html,https://www.naixue.org/26603.html,https://www.naixue.org/26601.html,https://www.naixue.org/26599.html,https://www.naixue.org/26597.html,https://www.naixue.org/26595.html,https://www.naixue.org/26592.html,https://www.naixue.org/26593.html,https://www.naixue.org/26586.html,https://www.naixue.org/26584.html,https://www.naixue.org/26582.html,https://www.naixue.org/26580.html,https://www.naixue.org/26578.html,https://www.naixue.org/26576.html,https://www.naixue.org/26574.html,https://www.naixue.org/26572.html,https://www.naixue.org/26570.html,https://www.naixue.org/26568.html,https://www.naixue.org/26566.html,https://www.naixue.org/26564.html,https://www.naixue.org/26562.html,https://www.naixue.org/26560.html,https://www.naixue.org/26558.html,https://www.naixue.org/26554.html,https://www.naixue.org/26556.html,https://www.naixue.org/26552.html,https://www.naixue.org/26550.html,https://www.naixue.org/26548.html,https://www.naixue.org/26546.html,https://www.naixue.org/26544.html,https://www.naixue.org/26542.html,https://www.naixue.org/26540.html,https://www.naixue.org/26538.html,https://www.naixue.org/26536.html,https://www.naixue.org/26534.html,https://www.naixue.org/26532.html,https://www.naixue.org/26530.html,https://www.naixue.org/26528.html,https://www.naixue.org/26526.html,https://www.naixue.org/26524.html,https://www.naixue.org/26522.html,https://www.naixue.org/26520.html,https://www.naixue.org/26518.html,https://www.naixue.org/26516.html,https://www.naixue.org/26514.html,https://www.naixue.org/26512.html,https://www.naixue.org/26510.html,https://www.naixue.org/26508.html,https://www.naixue.org/26506.html,https://www.naixue.org/26504.html,https://www.naixue.org/26502.html,https://www.naixue.org/26500.html,https://www.naixue.org/26498.html,https://www.naixue.org/26496.html,https://www.naixue.org/26494.html,https://www.naixue.org/26492.html,https://www.naixue.org/26490.html,https://www.naixue.org/26488.html,https://www.naixue.org/26486.html,https://www.naixue.org/26484.html,https://www.naixue.org/26482.html,https://www.naixue.org/26480.html,https://www.naixue.org/26478.html,https://www.naixue.org/26476.html,https://www.naixue.org/26474.html,https://www.naixue.org/26472.html,https://www.naixue.org/26470.html,https://www.naixue.org/26468.html,https://www.naixue.org/26466.html,https://www.naixue.org/26464.html,https://www.naixue.org/26462.html,https://www.naixue.org/26460.html,https://www.naixue.org/26458.html,https://www.naixue.org/26456.html,https://www.naixue.org/26454.html,https://www.naixue.org/26452.html,https://www.naixue.org/26450.html,https://www.naixue.org/26448.html,https://www.naixue.org/26446.html,https://www.naixue.org/26444.html,https://www.naixue.org/26442.html,https://www.naixue.org/26440.html,https://www.naixue.org/26438.html,https://www.naixue.org/26436.html,https://www.naixue.org/26434.html,https://www.naixue.org/26432.html,https://www.naixue.org/26430.html,https://www.naixue.org/26428.html,https://www.naixue.org/26426.html,https://www.naixue.org/26424.html,https://www.naixue.org/26422.html,https://www.naixue.org/26420.html,https://www.naixue.org/26418.html,https://www.naixue.org/26416.html,https://www.naixue.org/26414.html,https://www.naixue.org/26412.html,https://www.naixue.org/26410.html,https://www.naixue.org/26408.html,https://www.naixue.org/26404.html,https://www.naixue.org/26406.html,https://www.naixue.org/26402.html,https://www.naixue.org/26400.html,https://www.naixue.org/26398.html,https://www.naixue.org/26396.html,https://www.naixue.org/26394.html,https://www.naixue.org/26392.html,https://www.naixue.org/26390.html,https://www.naixue.org/26388.html,https://www.naixue.org/26386.html,https://www.naixue.org/26384.html,https://www.naixue.org/26382.html,https://www.naixue.org/26380.html,https://www.naixue.org/26378.html,https://www.naixue.org/26376.html,https://www.naixue.org/26374.html,https://www.naixue.org/26372.html,https://www.naixue.org/26370.html,https://www.naixue.org/26368.html,https://www.naixue.org/26366.html,https://www.naixue.org/26364.html,https://www.naixue.org/26362.html,https://www.naixue.org/26360.html,https://www.naixue.org/26358.html,https://www.naixue.org/26356.html,https://www.naixue.org/26355.html,https://www.naixue.org/26350.html,https://www.naixue.org/26348.html,https://www.naixue.org/26346.html,https://www.naixue.org/26344.html,https://www.naixue.org/26342.html,https://www.naixue.org/26340.html,https://www.naixue.org/26338.html,https://www.naixue.org/26336.html,https://www.naixue.org/26334.html,https://www.naixue.org/26332.html,https://www.naixue.org/26330.html,https://www.naixue.org/26328.html,https://www.naixue.org/26326.html,https://www.naixue.org/26324.html,https://www.naixue.org/26322.html,https://www.naixue.org/26320.html,https://www.naixue.org/26318.html,https://www.naixue.org/26316.html,https://www.naixue.org/26314.html,https://www.naixue.org/26312.html,https://www.naixue.org/26310.html,https://www.naixue.org/26308.html,https://www.naixue.org/26306.html,https://www.naixue.org/26304.html,https://www.naixue.org/26302.html,https://www.naixue.org/26300.html,https://www.naixue.org/26298.html,https://www.naixue.org/26296.html,https://www.naixue.org/26294.html,https://www.naixue.org/26292.html,https://www.naixue.org/26290.html,https://www.naixue.org/26288.html,https://www.naixue.org/26286.html,https://www.naixue.org/26284.html,https://www.naixue.org/26282.html,https://www.naixue.org/26280.html,https://www.naixue.org/26278.html,https://www.naixue.org/26277.html,https://www.naixue.org/26272.html,https://www.naixue.org/26270.html,https://www.naixue.org/26268.html,https://www.naixue.org/26266.html,https://www.naixue.org/26264.html,https://www.naixue.org/26262.html,https://www.naixue.org/26260.html,https://www.naixue.org/26258.html,https://www.naixue.org/26256.html,https://www.naixue.org/26254.html,https://www.naixue.org/26252.html,https://www.naixue.org/26250.html,https://www.naixue.org/26248.html,https://www.naixue.org/26246.html,https://www.naixue.org/26244.html,https://www.naixue.org/26242.html,https://www.naixue.org/26240.html,https://www.naixue.org/26238.html,https://www.naixue.org/26236.html,https://www.naixue.org/26234.html,https://www.naixue.org/26232.html,https://www.naixue.org/26230.html,https://www.naixue.org/26228.html,https://www.naixue.org/26226.html,https://www.naixue.org/26224.html,https://www.naixue.org/26222.html,https://www.naixue.org/26220.html,https://www.naixue.org/26218.html,https://www.naixue.org/26216.html,https://www.naixue.org/26213.html,https://www.naixue.org/26211.html,https://www.naixue.org/26209.html,https://www.naixue.org/26207.html,https://www.naixue.org/26205.html,https://www.naixue.org/26203.html,https://www.naixue.org/26201.html,https://www.naixue.org/26199.html,https://www.naixue.org/26197.html,https://www.naixue.org/26195.html,https://www.naixue.org/26193.html,https://www.naixue.org/26191.html,https://www.naixue.org/26189.html,https://www.naixue.org/26187.html,https://www.naixue.org/26185.html,https://www.naixue.org/26183.html,https://www.naixue.org/26181.html,https://www.naixue.org/26179.html,https://www.naixue.org/26177.html,https://www.naixue.org/26175.html,https://www.naixue.org/26173.html,https://www.naixue.org/26171.html,https://www.naixue.org/26169.html,https://www.naixue.org/26167.html,https://www.naixue.org/26165.html,https://www.naixue.org/26163.html,https://www.naixue.org/26161.html,https://www.naixue.org/26159.html,https://www.naixue.org/26157.html,https://www.naixue.org/26155.html,https://www.naixue.org/26153.html,https://www.naixue.org/26149.html,https://www.naixue.org/26151.html,https://www.naixue.org/26147.html,https://www.naixue.org/26145.html,https://www.naixue.org/26143.html,https://www.naixue.org/26141.html,https://www.naixue.org/26139.html,https://www.naixue.org/26137.html,https://www.naixue.org/26135.html,https://www.naixue.org/26133.html,https://www.naixue.org/26131.html,https://www.naixue.org/26129.html,https://www.naixue.org/26127.html,https://www.naixue.org/26125.html,https://www.naixue.org/26123.html,https://www.naixue.org/26121.html,https://www.naixue.org/26119.html,https://www.naixue.org/26117.html,https://www.naixue.org/26115.html,https://www.naixue.org/26113.html,https://www.naixue.org/26111.html,https://www.naixue.org/26109.html,https://www.naixue.org/26107.html,https://www.naixue.org/26105.html,https://www.naixue.org/26103.html,https://www.naixue.org/26101.html,https://www.naixue.org/26099.html,https://www.naixue.org/26097.html,https://www.naixue.org/26095.html,https://www.naixue.org/26093.html,https://www.naixue.org/26091.html,https://www.naixue.org/26089.html,https://www.naixue.org/26087.html,https://www.naixue.org/26085.html,https://www.naixue.org/26083.html,https://www.naixue.org/26081.html,https://www.naixue.org/26079.html,https://www.naixue.org/26077.html,https://www.naixue.org/26075.html,https://www.naixue.org/26073.html,https://www.naixue.org/26071.html,https://www.naixue.org/26069.html,https://www.naixue.org/26067.html,https://www.naixue.org/26065.html,https://www.naixue.org/26063.html,https://www.naixue.org/26061.html,https://www.naixue.org/26059.html,https://www.naixue.org/26057.html,https://www.naixue.org/26055.html,https://www.naixue.org/26053.html,https://www.naixue.org/26051.html,https://www.naixue.org/26049.html,https://www.naixue.org/26047.html,https://www.naixue.org/26045.html,https://www.naixue.org/26043.html,https://www.naixue.org/26041.html,https://www.naixue.org/26039.html,https://www.naixue.org/26037.html,https://www.naixue.org/26035.html,https://www.naixue.org/26033.html,https://www.naixue.org/26031.html,https://www.naixue.org/26029.html,https://www.naixue.org/26027.html";
        // System.out.println("urls:" + urlString);
        String[] urls = urlString.split(",");
        AutoSave autoSave = new AutoSave();
        autoSave.autoDownload(urls, IMAGE_CSS_QUERY, BROWSER, ATTRIBUTE_NAME, PAGE_TOTAL_CSS_QUERY, PAGE_TITLE_CSS_QUERY, BASE_SAVE_DIRECTORY);
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        PrintWriter writer = resp.getWriter();
        writer.println("get");
    }
}
